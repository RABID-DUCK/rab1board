"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[536],{536:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var n=a(821),i={class:"d-flex h-100"},d={class:"panel dashboard-single",id:"left-panel-dash"},l=["value"],s={class:"info-left-panel"},o={class:"dashboard-single-user"},c=["src"],u={class:"position-relative name-dashboard","data-rename-dashboard":""},r={key:0,class:"text-center",title:"Название вашего проекта"},h={class:"dashboard-single-left-panel"},m=[(0,n.Uk)(" Participants "),(0,n._)("span",null,"+",-1)],p=(0,n._)("a",{href:""},"Chart",-1),_=(0,n._)("a",{href:""},"Scheduled events",-1),k=(0,n._)("button",{class:"btn disabled",type:"button"},"Chat dashboard",-1),f={class:"desk-wrapper d-flex justify-content-start",id:"desk-wrapper"},b=["data-column-id","data-order"],v=["onClick"],C=(0,n._)("i",{class:"bi bi-check-lg save-column hide"},null,-1),w={class:"desk-block",id:"desk-list"},g=["onClick","data-desk-id"],y=["src","alt"],x={class:"data-desk"},M=["checked","onClick"],D=(0,n._)("span",null,"status",-1),A=["onClick"],U={class:"add-column-panel",id:"add-column-panel"};var $={class:"position-relative","data-info-edit":""},T=["value"];const V={name:"InputSave",props:["title_","id"],data:function(){return{title:this.title_}},methods:{sendValue:function(){this.$emit("valueTitle",{id:this.id,title:this.title})}}};var j=a(744);var q={class:"column-modal-wrapper text-center",id:"modal-column"},z={class:"mb-2",for:"col-form-label desk-title"};const L={name:"CreatePanel",props:["dash_id","user_id","title_event"],data:function(){return{title:""}},methods:{addColumn:function(){var e=this;fetch("/api/column/create",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:this.title,dashboard_id:this.dash_id})}).then((function(e){return e.json()})).then((function(t){e.$emit("columnsList",{columnsList:t.columns}),e.title=""}))}}};const P={name:"Dashboard",components:{inputSave:(0,j.Z)(V,[["render",function(e,t,a,i,d,l){return(0,n.wg)(),(0,n.iD)("div",$,[(0,n._)("input",{type:"hidden",value:a.id},null,8,T),(0,n.wy)((0,n._)("input",{class:"form-control","data-rename-dashboard-title":"","onUpdate:modelValue":t[0]||(t[0]=function(e){return d.title=e})},null,512),[[n.nr,d.title]]),(0,n._)("i",{onClick:t[1]||(t[1]=function(){return l.sendValue&&l.sendValue.apply(l,arguments)}),class:"bi bi-check-lg save-column",id:"rename-dashboard",style:{position:"absolute",top:"7px",right:"5px","text-align":"center"}})])}]]),CreatePanel:(0,j.Z)(L,[["render",function(e,t,a,i,d,l){return(0,n.wg)(),(0,n.iD)("div",q,[(0,n._)("label",z,[(0,n._)("b",null,"Type title for "+(0,n.zw)(a.title_event),1)]),(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return d.title=e}),class:"form-control",type:"text",name:"desk-title",id:"text-column-create",placeholder:"Make auth"},null,512),[[n.nr,d.title]]),(0,n._)("button",{class:"btn mt-2",onClick:t[1]||(t[1]=(0,n.iM)((function(e){return l.addColumn(a.dash_id,a.user_id)}),["prevent"]))},"Create"),(0,n._)("span",{class:"remove-column-modal text-black-50",onClick:t[2]||(t[2]=function(){return e.closeModal&&e.closeModal.apply(e,arguments)})},"X")])}]]),AddPanel:a(822).Z},props:["title","columnsList"],data:function(){return{columns:null,dash_id:null,dash_title:null,rename_dash:!1,create_column:!1,columnClicked:[],clickedAddUser:!1}},mounted:function(){this.dash_id=this.decoder(this.$route.params.id),this.dash_title=this.$route.params.title,this.getColumns()},methods:{renameDashboard:function(e){var t=this;this.rename_dash=!0,this.axios.post("/api/dashboard/rename",{id:this.dash_id,title:e.title}).then((function(e){t.dash_title=e.data.title,t.$router.replace("/dashboard/"+t.coder(t.dash_id)+"/"+e.data.title),t.rename_dash=!1})).catch((function(e){t.rename_dash=!1}))},addUsersModal:function(e){this.clickedAddUser=!0},clickAddUser:function(e){this.axios.post("/api/dashboard/addUser",{dashboard_id:e.id,email:e.info})},clickAddColumn:function(e){this.create_column=!1,this.getColumns()},clickRenameColumn:function(e){var t=this;this.axios.post("/api/column/rename",{id:e.id,title:e.title}).then((function(e){t.columnClicked=!1,t.getColumns()}))},viewDesk:function(e){},doneTask:function(e){},today:function(e){},createDeskMiniModal:function(e){},addColumnModal:function(e){this.create_column=!0},getColumns:function(){var e=this;this.axios("/api/getColumns/"+this.dash_id).then((function(t){e.columns=t.data,e.columnClicked=e.columns.map((function(){return!1}))}))}}},Z=(0,j.Z)(P,[["render",function(e,t,a,$,T,V){var j=(0,n.up)("input-save"),q=(0,n.up)("add-panel"),z=(0,n.up)("create-panel");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",d,[(0,n._)("input",{type:"hidden",id:"dashboard-id",value:T.dash_id},null,8,l),(0,n._)("div",s,[(0,n._)("div",o,[(0,n._)("div",null,[(0,n._)("img",{src:"/images/"+this.$store.state.auth.user.image,alt:"Фото профиля",width:"50",height:"60"},null,8,c)]),(0,n._)("div",null,[(0,n._)("b",null,(0,n.zw)(this.$store.state.auth.user.login),1),(0,n._)("span",{class:(0,n.C_)({"text-danger":this.$store.state.auth.user.premium,"text-secondary":!this.$store.state.auth.premium})},(0,n.zw)(this.$store.state.auth.user.premium?"Premium":"Free"),3)])])]),(0,n._)("div",u,[T.rename_dash?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("h2",r,(0,n.zw)(T.dash_title),1)),T.rename_dash?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("i",{key:1,class:"bi bi-pen-fill","data-title-dashboard":"",onClick:t[0]||(t[0]=(0,n.iM)((function(e){return T.rename_dash=!0}),["prevent"]))})),T.rename_dash?((0,n.wg)(),(0,n.j4)(j,{key:2,onValueTitle:V.renameDashboard,title_:T.dash_title},null,8,["onValueTitle","title_"])):(0,n.kq)("",!0)]),(0,n._)("div",h,[(0,n._)("button",{class:"btn-participiants",onClick:t[1]||(t[1]=(0,n.iM)((function(e){return V.addUsersModal(T.dash_id)}),["prevent"]))},m),T.clickedAddUser?((0,n.wg)(),(0,n.j4)(q,{key:0,label_title:"Пригласить пользователя в проект",id:T.dash_id,"class-props":"dinamycal-modal card-body add-dashboard-panel animate-window",onInfoComponent:V.clickAddUser,"place-holder":"Введите почту пользователя",onCloseModal:t[2]||(t[2]=function(e){return T.clickedAddUser=!1})},null,8,["id","onInfoComponent"])):(0,n.kq)("",!0),p,_,k])]),(0,n._)("div",f,[T.columns?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(T.columns,(function(e,t){return(0,n.wg)(),(0,n.iD)("div",{class:"wrap",key:e.id,"data-column-id":e.id,"data-order":e.order},[(0,n.wy)((0,n._)("div",{class:"column",onClick:(0,n.iM)((function(e){return T.columnClicked[t]=!0}),["prevent"]),"data-column-title":""},[(0,n._)("span",null,(0,n.zw)(e.title),1),C],8,v),[[n.F8,!T.columnClicked[t]]]),T.columnClicked[t]?((0,n.wg)(),(0,n.j4)(j,{key:0,onValueTitle:V.clickRenameColumn,title_:e.title,id:e.id},null,8,["onValueTitle","title_","id"])):(0,n.kq)("",!0),(0,n._)("div",w,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.desks,(function(e){return(0,n.wg)(),(0,n.iD)("div",{class:"desk",onClick:function(t){return V.viewDesk(e.id)},"data-desk-id":e.id,style:{"{'box-shadow":"0 0 10px 3px' + desk.color[0].color: desk.color_id}"}},[(0,n._)("p",null,(0,n.zw)(e.title),1),e.image?((0,n.wg)(),(0,n.iD)("img",{key:0,src:e.image,alt:e.title},null,8,y)):(0,n.kq)("",!0),(0,n._)("div",x,[(0,n._)("input",{class:"custom-checkbox",type:"checkbox",id:"status",name:"status",value:"yes",checked:e.status,onClick:function(t){return V.doneTask(e.id)}},null,8,M),(0,n._)("time",{datetime:"2011-11-18T14:54:39.929Z",name:"date",id:"data-desk",class:(0,n.C_)({"text-muted":!e.data_end,"text-danger fw-bold":V.today(e.data_end),"fw-bold":!V.today(e.data_end)})},(0,n.zw)(e.data_end?V.today(e.data_end)?"Сегодня":"До "+e.data_end:"Сроков нет"),3)]),D],8,g)})),256)),(0,n._)("button",{class:"add-desk",id:"add-task-title",onClick:function(t){return V.createDeskMiniModal(e.id)}},"+ Add desk",8,A)])],8,b)})),128)):(0,n.kq)("",!0),(0,n._)("div",U,[(0,n._)("button",{class:"add-column",onClick:t[3]||(t[3]=(0,n.iM)((function(e){return V.addColumnModal(T.dash_id)}),["prevent"]))},"+ Add column"),T.create_column?((0,n.wg)(),(0,n.j4)(z,{key:0,dash_id:T.dash_id,user_id:this.$store.state.auth.user.id,title_event:"column",onCloseModal:t[4]||(t[4]=function(e){return T.create_column=!1}),onColumnsList:V.clickAddColumn},null,8,["dash_id","user_id","onColumnsList"])):(0,n.kq)("",!0)])])])}]])}}]);